jQuery(document).ready(function(b){var a=b(".hour_input").length;b("#time_slots").val(a);b("#existing_count").val(a);b("#set_time_slots").on("submit",function(h){var d=b(".overlay",b(this));d.show();h.preventDefault();var c=b(".hour_input").length;var f=c;var g=b('[name="time_slots"]').val();if(g==f){}else{if(g>f){for(i=f;i<g;i++){f=i;b("#new_time_slots").append('<div class="slot_input"><span class="label"><label for="hh['+i+']">slot '+(i+1)+' : </label></span><input type="text" class="hour_input" id="hh['+i+']" value="" name="hh['+i+']" size="2" maxlength="2" autocomplete="off"> : <input type="text" id="mn['+i+']" class="mn_input" value="" name="mn['+i+']" size="2" maxlength="2" autocomplete="off"> <select name="ampm['+i+']" class="ampm_sel"><option value="am">am</option><option value="pm">pm</option></select><br /></div>')}}else{for(i=f;i>g;i--){b(".slot_input:last").remove();f=i}}}d.hide()});b("#assign_time_slots").on("submit",function(d){d.preventDefault();var c=b(".overlay",b(this));c.show();b.post(ajaxurl,b(this).serializeArray(),function(h){var g=0;var e=b(".hour_input").length;var f=e;var j=b(h).length;b(h).each(function(){hh=b(this)[0];mn=b(this)[1];ampm=b(this)[2];b('[name="hh['+g+']"]').val(hh);b('[name="mn['+g+']"]').val(mn);b('[name="ampm['+g+']"]').val(ampm);g++});b("#time_slots").val(j);if(j<f){for(g=f;g>j;g--){b(".slot_input:last").remove();f=g}}c.hide()},"json")});b(".datepicker").datepicker({onClose:function(c){b(this).attr("value",c)},altField:b(this).prev()});b("#excluded-dates").on("submit",function(d){d.preventDefault();var c=b(".overlay",b(this));c.show();b.post(ajaxurl,b(this).serializeArray(),function(e){if(e.error){alert(e.error);c.hide()}else{location.reload(true)}},"json")});b("#excluded-days").on("submit",function(d){d.preventDefault();var c=b(".overlay",b(this));c.show();b.post(ajaxurl,b(this).serializeArray(),function(e){if(e.error){alert(e.error);c.hide()}else{location.reload(true)}},"json")});b(".defined-dates").on("change","input.remove",function(){b(this).parent().remove()});b("#excluded-dates").on("change","input.allow",function(){var c;if(true==b(this).prop("checked")){c=(function(){i=0;b('#excluded-dates input[name^="dates_allowed"]').each(function(){b(this).attr("name","dates_allowed["+i+"]");i++});return i})();newName="dates_allowed["+c+"]";b(this).prev().attr("name",newName)}else{c=(function(){i=0;b('#excluded-dates input[name^="dates_denied"]').each(function(){b(this).attr("name","dates_denied["+i+"]");i++});return i})();newName="dates_denied["+c+"]";b(this).prev().attr("name",newName)}});b("#tabs").tabs();b("form#general-options").on("submit",function(c){c.preventDefault();overlay=b(".overlay",b(this));overlay.show();b.post(ajaxurl,b(this).serializeArray(),function(d){if(true!=d.success){alert(d.data)}}).fail(function(d){alert("error code: "+d.status+" error message: "+d.statusText);b("form#general-options").trigger("reset")}).always(function(){overlay.hide()})})});